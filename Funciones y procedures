/*
*
*   FUNCIONES
*   Y
*   PROCEDIMIENTOS
*
*/

CREATE OR REPLACE FUNCTION ASSERT_EQUALS (SALIDA BOOLEAN, SALIDAESPERADA BOOLEAN)
RETURN VARCHAR2 AS 
BEGIN 
    IF (SALIDA = SALIDAESPERADA) THEN
        RETURN 'CORRECTO';
    ELSE
        RETURN 'FALLO';
    END IF;
END ASSERT_EQUALS;

/

CREATE OR REPLACE FUNCTION CHECK_NULL (ELEMENTO VARCHAR2)
RETURN VARCHAR2 AS 
BEGIN 
    IF (ELEMENTO IS NULL) THEN
        RETURN '   -';
    ELSE
        RETURN ELEMENTO;
    END IF;
END CHECK_NULL;

/

CREATE OR REPLACE PROCEDURE IMPRIMETICKET(ID_PED NUMBER)
IS
 CURSOR C IS
    SELECT NOMBRE,TAMANO,PRECIO,CANTIDAD,PRECIO*CANTIDAD AS TOTAL 
    FROM (SELECT * FROM PEDIDOS WHERE ID_PEDIDO=ID_PED) NATURAL JOIN LINEASPEDIDOS NATURAL JOIN PRODUCTOS;
 PRODUCTOS C%ROWTYPE;
 PRECIOTOTAL NUMBER;
BEGIN
    OPEN C;
    FETCH C INTO PRODUCTOS;
    DBMS_OUTPUT.PUT_LINE(RPAD('NOMBRE:', 25) || RPAD('TAMANO:', 25) || RPAD('PRECIO/UD:', 25) || RPAD('CANTIDAD:', 25) || RPAD('PRECIO:', 25));
    DBMS_OUTPUT.PUT_LINE(LPAD('-', 120, '-'));
    WHILE C%FOUND LOOP
        DBMS_OUTPUT.PUT_LINE(RPAD(PRODUCTOS.NOMBRE, 25) || RPAD(CHECK_NULL(PRODUCTOS.TAMANO),25) ||
                            RPAD(PRODUCTOS.PRECIO, 25) || RPAD(PRODUCTOS.CANTIDAD, 25) || RPAD(PRODUCTOS.TOTAL, 25));
        FETCH C INTO PRODUCTOS;
    END LOOP;
    CLOSE C;
    SELECT SUM(PRECIO*CANTIDAD) INTO PRECIOTOTAL 
    FROM (SELECT * FROM PEDIDOS WHERE ID_PEDIDO=ID_PED) NATURAL JOIN LINEASPEDIDOS NATURAL JOIN PRODUCTOS;
    DBMS_OUTPUT.PUT_LINE('PRECIO TOTAL:' || PRECIOTOTAL);
END IMPRIMETICKET;
/

CREATE OR REPLACE PROCEDURE IMPRIMECARTA IS
    CURSOR C IS SELECT * FROM PRODUCTOS;
    PRODUCTOS C%ROWTYPE;
    PRIMERO NUMBER;
BEGIN
    OPEN C;
    FETCH C INTO PRODUCTOS;
    DBMS_OUTPUT.PUT_LINE(RPAD('Nombre:', 25) || RPAD('Tamano:', 25) || RPAD('Precio:', 25) || RPAD('Alergenos:',25));
    WHILE C%FOUND LOOP
        DBMS_OUTPUT.PUT(RPAD(PRODUCTOS.NOMBRE, 25) || RPAD(CHECK_NULL(PRODUCTOS.TAMANO),25) || RPAD(PRODUCTOS.PRECIO,25));
        PRIMERO := 0;
        FOR ALERGENO IN (SELECT * FROM CONTIENEN NATURAL JOIN TIPOSALERGENOS WHERE OID_PRODUCTO=PRODUCTOS.OID_PRODUCTO) LOOP
            IF(PRIMERO=0) THEN
                DBMS_OUTPUT.PUT(ALERGENO.TIPOALERGENO);
                PRIMERO := 1;
            ELSE
                DBMS_OUTPUT.PUT(', ' || (ALERGENO.TIPOALERGENO));
            END IF;
        END LOOP;
        DBMS_OUTPUT.PUT_LINE('');
        FETCH C INTO PRODUCTOS;
    END LOOP;
    CLOSE C;
END IMPRIMECARTA;
/
CREATE OR REPLACE PROCEDURE INICIALIZAR_CLIENTES IS
BEGIN
DELETE FROM CLIENTES;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_CLIENTE (
    W_DIRECCION IN CLIENTES.DIRECCION%TYPE,
    W_TFN IN CLIENTES.TELEFONO%TYPE
) IS
BEGIN
INSERT INTO CLIENTES (OID_CLIENTE, DIRECCION, TELEFONO)
VALUES (SEC_CLIENTES.NEXTVAL, W_DIRECCION, W_TFN);
COMMIT;
END INSERTAR_CLIENTE;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_CLIENTE(
    W_DIRECCION IN CLIENTES.DIRECCION%TYPE,
    W_TFN IN CLIENTES.TELEFONO%TYPE,
    W_OID_CLIENTE IN CLIENTES.OID_CLIENTE%TYPE
    ) IS
BEGIN
UPDATE CLIENTES SET
    DIRECCION = W_DIRECCION,
    TELEFONO = W_TFN,
    OID_CLIENTE = W_OID_CLIENTE
WHERE OID_CLIENTE = W_OID_CLIENTE;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_CLIENTE(ID_CLIENTE_ELIMINAR IN CLIENTES.OID_CLIENTE%TYPE)
IS
BEGIN
    DELETE FROM CLIENTES WHERE OID_CLIENTE = ID_CLIENTE_ELIMINAR;
END;
/


CREATE OR REPLACE PROCEDURE INICIALIZAR_PEDIDOS IS
BEGIN
DELETE FROM PEDIDOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_PEDIDO (
    W_COMENTARIO IN PEDIDOS.COMENTARIO%TYPE,
    W_VALORACION IN PEDIDOS.VALORACION%TYPE,
    W_FECHA IN PEDIDOS.FECHA%TYPE,
    W_OID_CLIENTE IN PEDIDOS.OID_CLIENTE%TYPE
) IS
BEGIN
INSERT INTO PEDIDOS (ID_PEDIDO, COMENTARIO, VALORACION, FECHA, OID_CLIENTE)
VALUES (SEC_PEDIDOS.NEXTVAL, W_COMENTARIO, W_VALORACION, W_FECHA, W_OID_CLIENTE);
COMMIT;
END INSERTAR_PEDIDO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_PEDIDO(
    W_COMENTARIO IN PEDIDOS.COMENTARIO%TYPE,
    W_VALORACION IN PEDIDOS.VALORACION%TYPE,
    W_FECHA IN PEDIDOS.FECHA%TYPE,
    W_OID_CLIENTE IN PEDIDOS.OID_CLIENTE%TYPE,
    W_ID_PEDIDO IN PEDIDOS.ID_PEDIDO%TYPE
    ) IS
BEGIN
UPDATE PEDIDOS SET
    COMENTARIO = W_COMENTARIO,
    VALORACION = W_VALORACION,
    FECHA = W_FECHA,
    OID_CLIENTE = W_OID_CLIENTE,
    ID_PEDIDO = W_ID_PEDIDO
WHERE ID_PEDIDO = W_ID_PEDIDO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_PEDIDO(ID_PEDIDO_ELIMINAR IN PEDIDOS.ID_PEDIDO%TYPE)
IS
BEGIN
    DELETE FROM PEDIDOS WHERE ID_PEDIDO = ID_PEDIDO_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_PEDIDOSLOCAL IS
BEGIN
DELETE FROM PEDIDOSLOCAL;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_PEDIDOLOCAL(
    W_ID_PEDIDO IN PEDIDOSLOCAL.ID_PEDIDO%TYPE
)
IS
BEGIN
INSERT INTO PEDIDOSLOCAL (ID_PEDIDO)
VALUES (W_ID_PEDIDO);
COMMIT;
END INSERTAR_PEDIDOLOCAL;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_PEDIDOLOCAL(
    W_ID_PEDIDO IN PEDIDOS.ID_PEDIDO%TYPE
    ) IS
BEGIN
UPDATE PEDIDOSLOCAL SET
    ID_PEDIDO = W_ID_PEDIDO
WHERE ID_PEDIDO = W_ID_PEDIDO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_PEDIDOLOCAL(ID_PEDIDOLOCAL_ELIMINAR IN PEDIDOSLOCAL.ID_PEDIDO%TYPE)
IS
BEGIN
    DELETE FROM PEDIDOSLOCAL WHERE ID_PEDIDO = ID_PEDIDOLOCAL_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_VEHICULOS IS
BEGIN
DELETE FROM VEHICULOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_VEHICULO (
    W_MATRICULA IN VEHICULOS.MATRICULA%TYPE,
    W_TIPOVEHICULO IN VEHICULOS.TIPOVEHICULO%TYPE
) IS
BEGIN
INSERT INTO VEHICULOS (MATRICULA, TIPOVEHICULO)
VALUES (W_MATRICULA, W_TIPOVEHICULO);
COMMIT;
END INSERTAR_VEHICULO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_VEHICULO(
    W_MATRICULA IN VEHICULOS.MATRICULA%TYPE,
    W_TIPOVEHICULO IN VEHICULOS.TIPOVEHICULO%TYPE
    ) IS
BEGIN
UPDATE VEHICULOS SET
    MATRICULA = W_MATRICULA,
    TIPOVEHICULO = W_TIPOVEHICULO
WHERE MATRICULA = W_MATRICULA;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_VEHICULO(MATRICULA_VEHICULO_ELIMINAR IN VEHICULOS.MATRICULA%TYPE)
IS
BEGIN
    DELETE FROM VEHICULOS WHERE MATRICULA = MATRICULA_VEHICULO_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_REPARTIDORES IS
BEGIN
DELETE FROM REPARTIDORES;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_REPARTIDOR (
    W_DNI IN REPARTIDORES.DNI%TYPE,
    W_NOMBRE IN REPARTIDORES.NOMBRE%TYPE,
    W_SUELDO IN REPARTIDORES.SUELDO%TYPE,
    W_NUM IN REPARTIDORES.NUMCUENTABANCARIA%TYPE
) IS
BEGIN
INSERT INTO REPARTIDORES (DNI, NOMBRE, SUELDO, NUMCUENTABANCARIA)
VALUES (W_DNI, W_NOMBRE, W_SUELDO, W_NUM);
COMMIT;
END INSERTAR_REPARTIDOR;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_REPARTIDOR(
    W_DNI IN REPARTIDORES.DNI%TYPE,
    W_NOMBRE IN REPARTIDORES.NOMBRE%TYPE,
    W_SUELDO IN REPARTIDORES.SUELDO%TYPE,
    W_NUM IN REPARTIDORES.NUMCUENTABANCARIA%TYPE
    ) IS
BEGIN
UPDATE REPARTIDORES SET
    DNI = W_DNI,
    NOMBRE = W_NOMBRE,
    SUELDO = W_SUELDO,
    NUMCUENTABANCARIA = W_NUM
WHERE DNI = W_DNI;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_REPARTIDOR(DNI_REPARTIDOR_ELIMINAR IN REPARTIDORES.DNI%TYPE)
IS
BEGIN
    DELETE FROM REPARTIDORES WHERE DNI = DNI_REPARTIDOR_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_COCINEROS IS
BEGIN
DELETE FROM COCINEROS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_COCINERO (
    W_DNI IN COCINEROS.DNI%TYPE,
    W_NOMBRE IN COCINEROS.NOMBRE%TYPE,
    W_SUELDO IN COCINEROS.SUELDO%TYPE,
    W_NUM IN COCINEROS.NUMCUENTABANCARIA%TYPE
) IS
BEGIN
INSERT INTO COCINEROS (DNI, NOMBRE, SUELDO, NUMCUENTABANCARIA)
VALUES (W_DNI, W_NOMBRE, W_SUELDO, W_NUM);
COMMIT;
END INSERTAR_COCINERO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_COCINERO(
    W_DNI IN COCINEROS.DNI%TYPE,
    W_NOMBRE IN COCINEROS.NOMBRE%TYPE,
    W_SUELDO IN COCINEROS.SUELDO%TYPE,
    W_NUM IN COCINEROS.NUMCUENTABANCARIA%TYPE
    ) IS
BEGIN
UPDATE COCINEROS SET
    DNI = W_DNI,
    NOMBRE = W_NOMBRE,
    SUELDO = W_SUELDO,
    NUMCUENTABANCARIA = W_NUM
WHERE DNI = W_DNI;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_COCINERO(DNI_COCINERO_ELIMINAR IN COCINEROS.DNI%TYPE)
IS
BEGIN
    DELETE FROM COCINEROS WHERE DNI = DNI_COCINERO_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_ORDERTAKERS IS
BEGIN
DELETE FROM ORDERTAKERS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_ORDERTAKER (
    W_DNI IN ORDERTAKERS.DNI%TYPE,
    W_NOMBRE IN ORDERTAKERS.NOMBRE%TYPE,
    W_SUELDO IN ORDERTAKERS.SUELDO%TYPE,
    W_NUM IN ORDERTAKERS.NUMCUENTABANCARIA%TYPE
) IS
BEGIN
INSERT INTO ORDERTAKERS (DNI, NOMBRE, SUELDO, NUMCUENTABANCARIA)
VALUES (W_DNI, W_NOMBRE, W_SUELDO, W_NUM);
COMMIT;
END INSERTAR_ORDERTAKER;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_ORDERTAKER(
    W_DNI IN ORDERTAKERS.DNI%TYPE,
    W_NOMBRE IN ORDERTAKERS.NOMBRE%TYPE,
    W_SUELDO IN ORDERTAKERS.SUELDO%TYPE,
    W_NUM IN ORDERTAKERS.NUMCUENTABANCARIA%TYPE
    ) IS
BEGIN
UPDATE ORDERTAKERS SET
    DNI = W_DNI,
    NOMBRE = W_NOMBRE,
    SUELDO = W_SUELDO,
    NUMCUENTABANCARIA = W_NUM
WHERE DNI = W_DNI;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_ORDERTAKER(DNI_ORDERTAKER_ELIMINAR IN ORDERTAKERS.DNI%TYPE)
IS
BEGIN
    DELETE FROM ORDERTAKERS WHERE DNI = DNI_ORDERTAKER_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_REPARTOS IS
BEGIN
DELETE FROM REPARTOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_REPARTO (
    W_HORAINICIO IN REPARTOS.HORAINICIO%TYPE,
    W_HORAFIN IN REPARTOS.HORAFIN%TYPE,
    W_DNI_REPARTIDOR IN REPARTOS.DNI_REPARTIDOR%TYPE,
    W_MATRICULA IN REPARTOS.MATRICULA%TYPE
) IS
BEGIN
INSERT INTO REPARTOS (OID_REPARTO, HORAINICIO, HORAFIN, DNI_REPARTIDOR, MATRICULA)
VALUES (SEC_REPARTOS.NEXTVAL, W_HORAINICIO, W_HORAFIN, W_DNI_REPARTIDOR, W_MATRICULA);
COMMIT;
END INSERTAR_REPARTO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_REPARTO(
    W_OID_REPARTO IN REPARTOS.OID_REPARTO%TYPE,
    W_HORAINICIO IN REPARTOS.HORAINICIO%TYPE,
    W_HORAFIN IN REPARTOS.HORAFIN%TYPE,
    W_DNI_REPARTIDOR IN REPARTOS.DNI_REPARTIDOR%TYPE,
    W_MATRICULA IN REPARTOS.MATRICULA%TYPE
    ) IS
BEGIN
UPDATE REPARTOS SET
    OID_REPARTO = W_OID_REPARTO,
    HORAINICIO = W_HORAINICIO,
    HORAFIN = W_HORAFIN,
    DNI_REPARTIDOR = W_DNI_REPARTIDOR,
    MATRICULA = W_MATRICULA
WHERE OID_REPARTO = W_OID_REPARTO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_REPARTO(OID_REPARTO_REPARTO_ELIMINAR IN REPARTOS.OID_REPARTO%TYPE)
IS
BEGIN
    DELETE FROM REPARTOS WHERE OID_REPARTO = OID_REPARTO_REPARTO_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_PEDIDOSDOMICILIO IS
BEGIN
DELETE FROM PEDIDOSDOMICILIO;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_PEDIDODOMICILIO (
    W_ID_PEDIDO IN PEDIDOSDOMICILIO.ID_PEDIDO%TYPE,
    W_OID_REPARTO IN PEDIDOSDOMICILIO.OID_REPARTO%TYPE
) IS
BEGIN
INSERT INTO PEDIDOSDOMICILIO (ID_PEDIDO, OID_REPARTO)
VALUES (W_ID_PEDIDO, W_OID_REPARTO);
COMMIT;
END INSERTAR_PEDIDODOMICILIO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_PEDIDODOMICILIO(
    W_ID_PEDIDO IN PEDIDOSDOMICILIO.ID_PEDIDO%TYPE,
    W_OID_REPARTO IN PEDIDOSDOMICILIO.OID_REPARTO%TYPE
    ) IS
BEGIN
UPDATE PEDIDOSDOMICILIO SET
    ID_PEDIDO = W_ID_PEDIDO,
    OID_REPARTO = W_OID_REPARTO

WHERE ID_PEDIDO = W_ID_PEDIDO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_PEDIDODOMICILIO(ID_PEDIDO_ELIMINAR IN PEDIDOSDOMICILIO.ID_PEDIDO%TYPE)
IS
BEGIN
    DELETE FROM PEDIDOSDOMICILIO WHERE ID_PEDIDO = ID_PEDIDO_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_TIPOSALERGENOS IS
BEGIN
DELETE FROM TIPOSALERGENOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_TIPOALERGENO (
    W_TIPOALERGENO IN TIPOSALERGENOS.TIPOALERGENO%TYPE
) IS
BEGIN
INSERT INTO TIPOSALERGENOS (TIPOALERGENO)
VALUES (W_TIPOALERGENO);
COMMIT;
END INSERTAR_TIPOALERGENO;
/


CREATE OR REPLACE PROCEDURE ELIMINAR_TIPOALERGENO(TIPOALERGENO_ELIMINAR IN TIPOSALERGENOS.TIPOALERGENO%TYPE)
IS
BEGIN
    DELETE FROM TIPOSALERGENOS WHERE TIPOALERGENO = TIPOALERGENO_ELIMINAR;
END;
/


CREATE OR REPLACE PROCEDURE INICIALIZAR_PRODUCTOS IS
BEGIN
DELETE FROM PRODUCTOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_PRODUCTO (
    W_NOMBRE IN PRODUCTOS.NOMBRE%TYPE,
    W_PRECIO IN PRODUCTOS.PRECIO%TYPE,
    W_TAMANO IN PRODUCTOS.TAMANO%TYPE:=NULL
) IS
BEGIN
INSERT INTO PRODUCTOS (OID_PRODUCTO, NOMBRE, PRECIO, TAMANO)
VALUES (SEC_PRODUCTOS.NEXTVAL, W_NOMBRE, W_PRECIO, W_TAMANO);
COMMIT;
END INSERTAR_PRODUCTO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_PRODUCTO(
    W_OID_PRODUCTO IN PRODUCTOS.OID_PRODUCTO%TYPE,
    W_NOMBRE IN PRODUCTOS.NOMBRE%TYPE,
    W_PRECIO IN PRODUCTOS.PRECIO%TYPE,
    W_TAMANO IN PRODUCTOS.TAMANO%TYPE
    ) IS
BEGIN
UPDATE PRODUCTOS SET
    OID_PRODUCTO = W_OID_PRODUCTO,
    NOMBRE = W_NOMBRE,
    PRECIO = W_PRECIO,
    TAMANO = W_TAMANO
WHERE OID_PRODUCTO = W_OID_PRODUCTO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_PRODUCTO(ID_PRODUCTO_ELIMINAR IN PRODUCTOS.OID_PRODUCTO%TYPE)
IS
BEGIN
    DELETE FROM PRODUCTOS WHERE OID_PRODUCTO = ID_PRODUCTO_ELIMINAR;
END;
/



CREATE OR REPLACE PROCEDURE INICIALIZAR_CONTIENEN IS
BEGIN
DELETE FROM CONTIENEN;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_CONTIENE (
    W_OID_PRODUCTO IN CONTIENEN.OID_PRODUCTO%TYPE,
    W_TIPOALERGENO IN CONTIENEN.TIPOALERGENO%TYPE
) IS
BEGIN
INSERT INTO CONTIENEN (OID_CONTIENE,OID_PRODUCTO, TIPOALERGENO)
VALUES (SEC_CONTIENEN.NEXTVAL, W_OID_PRODUCTO, W_TIPOALERGENO);
COMMIT;
END INSERTAR_CONTIENE;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_CONTIENE(
    W_OID_CONTIENE IN CONTIENEN.OID_CONTIENE%TYPE,    
    W_OID_PRODUCTO IN CONTIENEN.OID_PRODUCTO%TYPE,
    W_TIPOALERGENO IN CONTIENEN.TIPOALERGENO%TYPE
    ) IS
BEGIN
UPDATE CONTIENEN SET
    OID_PRODUCTO = W_OID_PRODUCTO,
    TIPOALERGENO = W_TIPOALERGENO
WHERE OID_CONTIENE = W_OID_CONTIENE;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_CONTIENE(OID_CONTIENE_ELIMINAR IN CONTIENEN.OID_CONTIENE%TYPE)
IS
BEGIN
    DELETE FROM CONTIENEN WHERE OID_CONTIENE = OID_CONTIENE_ELIMINAR;
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_LINEASPEDIDOS IS
BEGIN
DELETE FROM LINEASPEDIDOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_LINEAPEDIDO (
    W_ID_PEDIDO IN LINEASPEDIDOS.ID_PEDIDO%TYPE,
    W_OID_PRODUCTO IN LINEASPEDIDOS.OID_PRODUCTO%TYPE,
    W_CANTIDAD IN LINEASPEDIDOS.CANTIDAD%TYPE
) IS
BEGIN
INSERT INTO LINEASPEDIDOS (OID_LINEAPEDIDO,ID_PEDIDO, OID_PRODUCTO, CANTIDAD)
VALUES (SEC_LINEASPEDIDOS.NEXTVAL, W_ID_PEDIDO, W_OID_PRODUCTO, W_CANTIDAD);
COMMIT;
END INSERTAR_LINEAPEDIDO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_LINEAPEDIDO(
    W_OID_LINEAPEDIDO IN LINEASPEDIDOS.OID_LINEAPEDIDO%TYPE,
    W_ID_PEDIDO IN LINEASPEDIDOS.ID_PEDIDO%TYPE,
    W_OID_PRODUCTO IN LINEASPEDIDOS.OID_PRODUCTO%TYPE,
    W_CANTIDAD IN LINEASPEDIDOS.CANTIDAD%TYPE
    ) IS
BEGIN
UPDATE LINEASPEDIDOS SET
    ID_PEDIDO = W_ID_PEDIDO,
    OID_PRODUCTO = W_OID_PRODUCTO,
    CANTIDAD = W_CANTIDAD
WHERE OID_LINEAPEDIDO = W_OID_LINEAPEDIDO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_LINEAPEDIDO(
OID_LINEAPEDIDO_ELIMINAR IN LINEASPEDIDOS.OID_LINEAPEDIDO%TYPE
)
IS
BEGIN
    DELETE FROM LINEASPEDIDOS WHERE (OID_LINEAPEDIDO = OID_LINEAPEDIDO_ELIMINAR);
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_INGREDIENTES IS
BEGIN
DELETE FROM INGREDIENTES;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_INGREDIENTE (
    W_NOMBRE IN INGREDIENTES.NOMBRE%TYPE,
    W_STOCK IN INGREDIENTES.STOCK%TYPE
) IS
BEGIN
INSERT INTO INGREDIENTES (OID_INGREDIENTE, NOMBRE, STOCK)
VALUES (SEC_INGREDIENTES.NEXTVAL, W_NOMBRE, W_STOCK);
COMMIT;
END INSERTAR_INGREDIENTE;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_INGREDIENTE(
    W_OID_INGREDIENTE IN INGREDIENTES.OID_INGREDIENTE%TYPE,
    W_NOMBRE IN INGREDIENTES.NOMBRE%TYPE,
    W_STOCK IN INGREDIENTES.STOCK%TYPE
    ) IS
BEGIN
UPDATE INGREDIENTES SET
    OID_INGREDIENTE = W_OID_INGREDIENTE,
    NOMBRE = W_NOMBRE,
    STOCK = W_STOCK
WHERE OID_INGREDIENTE = W_OID_INGREDIENTE;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_INGREDIENTE(OID_INGREDIENTE_ELIMINAR IN INGREDIENTES.OID_INGREDIENTE%TYPE)
IS
BEGIN
    DELETE FROM INGREDIENTES WHERE (OID_INGREDIENTE = OID_INGREDIENTE_ELIMINAR);
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_ENGLOBAN IS
BEGIN
DELETE FROM ENGLOBAN;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_ENGLOBA (
    W_OID_PRODUCTO IN ENGLOBAN.OID_PRODUCTO%TYPE,
    W_OID_INGREDIENTE IN ENGLOBAN.OID_INGREDIENTE%TYPE
) IS
BEGIN
INSERT INTO ENGLOBAN (OID_ENGLOBA, OID_PRODUCTO, OID_INGREDIENTE)
VALUES (SEC_ENGLOBAN.NEXTVAL, W_OID_PRODUCTO, W_OID_INGREDIENTE);
COMMIT;
END INSERTAR_ENGLOBA;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_ENGLOBA(
    W_OID_ENGLOBA IN ENGLOBAN.OID_ENGLOBA%TYPE,
    W_OID_PRODUCTO IN ENGLOBAN.OID_PRODUCTO%TYPE,
    W_OID_INGREDIENTE IN ENGLOBAN.OID_INGREDIENTE%TYPE
    ) IS
BEGIN
UPDATE ENGLOBAN SET
    OID_ENGLOBA = W_OID_ENGLOBA,
    OID_PRODUCTO = W_OID_PRODUCTO,
    OID_INGREDIENTE = W_OID_INGREDIENTE
WHERE OID_ENGLOBA = W_OID_ENGLOBA;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_ENGLOBA(OID_ENGLOBA_ELIMINAR IN ENGLOBAN.OID_ENGLOBA%TYPE)
IS
BEGIN
    DELETE FROM ENGLOBAN WHERE (OID_ENGLOBA = OID_ENGLOBA_ELIMINAR);
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_PROVEEDORES IS
BEGIN
DELETE FROM PROVEEDORES;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_PROVEEDOR (
    W_NIF IN PROVEEDORES.NIF%TYPE,
    W_TLF IN PROVEEDORES.TLF%TYPE,
    W_NOMBRE IN PROVEEDORES.NOMBRE%TYPE,
    W_DOMICILIO IN PROVEEDORES.DOMICILIO%TYPE
) IS
BEGIN
INSERT INTO PROVEEDORES (NIF, TLF, NOMBRE, DOMICILIO)
VALUES (W_NIF, W_TLF, W_NOMBRE, W_DOMICILIO);
COMMIT;
END INSERTAR_PROVEEDOR;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_PROVEEDOR(
    W_NIF IN PROVEEDORES.NIF%TYPE,
    W_TLF IN PROVEEDORES.TLF%TYPE,
    W_NOMBRE IN PROVEEDORES.NOMBRE%TYPE,
    W_DOMICILIO IN PROVEEDORES.DOMICILIO%TYPE
    ) IS
BEGIN
UPDATE PROVEEDORES SET
    NIF = W_NIF,
    TLF = W_TLF,
    NOMBRE = W_NOMBRE,
    DOMICILIO = W_DOMICILIO
WHERE NIF = W_NIF;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_PROVEEDOR(NIF_ELIMINAR IN PROVEEDORES.NIF%TYPE)
IS
BEGIN
    DELETE FROM PROVEEDORES WHERE (NIF = NIF_ELIMINAR);
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_ENCARGOS IS
BEGIN
DELETE FROM ENCARGOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_ENCARGO (
    W_FECHA IN ENCARGOS.FECHA%TYPE,
    W_NIF IN ENCARGOS.NIF%TYPE
) IS
BEGIN
INSERT INTO ENCARGOS (OID_ENCARGO, FECHA, NIF)
VALUES (SEC_ENCARGOS.NEXTVAL, W_FECHA, W_NIF);
COMMIT;
END INSERTAR_ENCARGO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_ENCARGO(
    W_OID_ENCARGO IN ENCARGOS.OID_ENCARGO%TYPE,
    W_FECHA IN ENCARGOS.FECHA%TYPE,
    W_NIF IN ENCARGOS.NIF%TYPE
    ) IS
BEGIN
UPDATE ENCARGOS SET
    OID_ENCARGO = W_OID_ENCARGO,
    FECHA = W_FECHA,
    NIF = W_NIF
WHERE OID_ENCARGO = W_OID_ENCARGO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_ENCARGO(OID_ENCARGO_ELIMINAR IN ENCARGOS.OID_ENCARGO%TYPE)
IS
BEGIN
    DELETE FROM ENCARGOS WHERE (OID_ENCARGO = OID_ENCARGO_ELIMINAR);
END;
/

CREATE OR REPLACE PROCEDURE INICIALIZAR_LINEASENCARGOS IS
BEGIN
DELETE FROM LINEASENCARGOS;
END;
/

CREATE OR REPLACE PROCEDURE INSERTAR_LINEAENCARGO (
    W_OID_INGREDIENTE IN LINEASENCARGOS.OID_INGREDIENTE%TYPE,
    W_OID_ENCARGO IN LINEASENCARGOS.OID_ENCARGO%TYPE,
    W_CANTIDAD IN LINEASENCARGOS.CANTIDAD%TYPE
) IS
BEGIN
INSERT INTO LINEASENCARGOS (OID_LINEAENCARGO,OID_INGREDIENTE, OID_ENCARGO, CANTIDAD)
VALUES (SEC_LINEASENCARGOS.NEXTVAL,W_OID_INGREDIENTE, W_OID_ENCARGO, W_CANTIDAD);
COMMIT;
END INSERTAR_LINEAENCARGO;
/

CREATE OR REPLACE PROCEDURE MODIFICAR_LINEAENCARGO(
    W_OID_LINEAENCARGO IN LINEASENCARGOS.OID_LINEAENCARGO%TYPE,
    W_OID_INGREDIENTE IN LINEASENCARGOS.OID_INGREDIENTE%TYPE,
    W_OID_ENCARGO IN LINEASENCARGOS.OID_ENCARGO%TYPE,
    W_CANTIDAD IN LINEASENCARGOS.CANTIDAD%TYPE
    ) IS
BEGIN
UPDATE LINEASENCARGOS SET
    OID_INGREDIENTE = W_OID_INGREDIENTE,
    OID_ENCARGO = W_OID_ENCARGO,
    CANTIDAD = W_CANTIDAD
WHERE OID_LINEAENCARGO = W_OID_LINEAENCARGO;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_LINEAENCARGO(
    OID_LINEAENCARGO_ELIMINAR IN LINEASENCARGOS.OID_LINEAENCARGO%TYPE
)
IS
BEGIN
    DELETE FROM LINEASENCARGOS WHERE (OID_LINEAENCARGO = OID_LINEAENCARGO_ELIMINAR);
END;
/
